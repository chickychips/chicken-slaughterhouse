(this["webpackJsonpchicken-slaughterhouse"]=this["webpackJsonpchicken-slaughterhouse"]||[]).push([[29],{549:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(133),l=n(17),i=n(321),c=n(322),s=n(323),u=n(324),d=n(14),p=n(564),h=n(325),m=n.n(h),x=n(547),y=n(97),f=n(545),g=function(e){Object(u.a)(n,e);var t=Object(s.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"render",value:function(){var e=[{title:"Tipe Biaya",dataIndex:"expense_type",key:"expense_type"},{title:"Nama Biaya",dataIndex:"expense_name",key:"expense_name"},{title:"Satuan",dataIndex:"measurement_unit_name",key:"measurement_unit_name"},{title:"Jumlah",dataIndex:"quantity",key:"quantity"},{title:"Harga",dataIndex:"unit_amount",key:"unit_amount"},{title:"Total",dataIndex:"total_amount",key:"total_amount"}],t=this.props,n=t.expenseDetail,a=t.recordId;if(n.length>0){var o=n.filter((function(e){return e.id===a}));return o.forEach((function(e,t){e.key=t+1})),r.a.createElement("div",null,r.a.createElement(f.a,{columns:e,dataSource:o}))}return r.a.createElement("div",null,r.a.createElement(f.a,{columns:e}))}}]),n}(r.a.Component),E=function(e){Object(u.a)(n,e);var t=Object(s.a)(n);function n(){var e;Object(i.a)(this,n);for(var a=arguments.length,o=new Array(a),l=0;l<a;l++)o[l]=arguments[l];return(e=t.call.apply(t,[this].concat(o))).state={searchText:"",sortedInfo:null,expandedRow:null},e.handleChange=function(t,n,a){console.log(a),e.setState({sortedInfo:a})},e.getColumnSearchProps=function(t){return{filterDropdown:function(t){var n=t.setSelectedKeys,a=t.selectedKeys,o=t.confirm,l=t.clearFilters;return r.a.createElement("div",{style:{padding:8}},r.a.createElement(x.a,{ref:function(t){e.searchInput=t},placeholder:"Cari",value:a[0],onChange:function(e){return n(e.target.value?[e.target.value]:[])},onPressEnter:function(){return e.handleSearch(a,o)},style:{width:188,marginBottom:8,display:"block"}}),r.a.createElement(y.a,{type:"primary",onClick:function(){return e.handleSearch(a,o)},icon:r.a.createElement(p.a,null),size:"small",style:{width:90,marginRight:8}},"Search"),r.a.createElement(y.a,{onClick:function(){return e.handleReset(l)},size:"small",style:{width:90}},"Reset"))},filterIcon:function(e){return r.a.createElement(p.a,{style:{color:e?"#1890ff":void 0}})},onFilter:function(e,n){return n[t]=null===n[t]?"":n[t],n[t].toString().toLowerCase().includes(e.toLowerCase())},onFilterDropdownVisibleChange:function(t){t&&setTimeout((function(){return e.searchInput.select()}))},render:function(t){var n=e.state.searchText;return t=null===t?"":t,r.a.createElement(m.a,{highlightStyle:{backgroundColor:"#ffc069",padding:0},searchWords:[n],autoEscape:!0,textToHighlight:t.toString()})}}},e.handleSearch=function(t,n){n(),e.setState({searchText:t[0]})},e.handleReset=function(t){t(),e.setState({searchText:""})},e}return Object(c.a)(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.getExpenseData;(0,e.resetExpenseData)(),t()}},{key:"render",value:function(){var e=this,t=this.state,n=t.sortedInfo,a=t.expandedRow;n=n||{},a=a||[];var o=[Object(l.a)({title:"id",dataIndex:"id",key:"id"},this.getColumnSearchProps("id"),{sorter:function(e,t){return e.id.replace(/-/g,"")-t.id.replace(/-/g,"")},sortOrder:"id"===n.columnKey&&n.order}),Object(l.a)({title:"Tanggal",width:250,dataIndex:"createdOn",key:"createdOn"},this.getColumnSearchProps("createdOn"),{sorter:function(e,t){return e.createdOn.replace(/-|:| |\./g,"")-t.createdOn.replace(/-|:| |\./g,"")},sortOrder:"createdOn"===n.columnKey&&n.order}),Object(l.a)({title:"Total Biaya Cutting",dataIndex:"totalExpenseCutting",key:"totalExpenseCutting"},this.getColumnSearchProps("totalExpenseCutting"),{sorter:function(e,t){return e.totalExpenseCutting-t.totalExpenseCutting},sortOrder:"totalExpenseCutting"===n.columnKey&&n.order}),Object(l.a)({title:"Total Biaya Freeze",dataIndex:"totalExpenseFreeze",key:"totalExpenseFreeze"},this.getColumnSearchProps("totalExpenseFreeze"),{sorter:function(e,t){return e.totalExpenseFreeze-t.totalExpenseFreeze},sortOrder:"totalExpenseFreeze"===n.columnKey&&n.order}),Object(l.a)({title:"Total Biaya Thawing",dataIndex:"totalExpenseThawing",key:"totalExpenseThawing"},this.getColumnSearchProps("totalExpenseThawing"),{sorter:function(e,t){return e.totalExpenseThawing-t.totalExpenseThawing},sortOrder:"totalExpenseThawing"===n.columnKey&&n.order}),Object(l.a)({title:"Created By",dataIndex:"createdBy",key:"createdBy"},this.getColumnSearchProps("createdBy"),{sorter:function(e,t){return e.createdBy.length-t.createdBy.length},sortOrder:"createdBy"===n.columnKey&&n.order})],i=this.props.expenseData;if(i.length>0){var c=[],s=[];i.forEach((function(e){c[e.id]||(c[e.id]=!0,s.push(e.id))}));var u=[],d=0;return s.forEach((function(e){var t=i.filter((function(t){return t.id===e})),n=0,a=0,r=0;t.forEach((function(e){"cutting"===e.expense_type&&(n+=e.total_amount),"freeze"===e.expense_type&&(a+=e.total_amount),"thawing"===e.expense_type&&(r+=e.total_amount)}));var o={};o.key=d,o.id=t[0].id,o.createdOn=t[0].created_on,o.createdBy=t[0].created_by,o.totalExpenseCutting=n,o.totalExpenseFreeze=a,o.totalExpenseThawing=r,u.push(o),d+=1})),r.a.createElement("div",{className:"text-nowrap"},r.a.createElement(f.a,{columns:o,dataSource:u,onChange:this.handleChange,onExpand:function(t,n){e.setState({expandedRow:t?[n.key]:void 0})},expandedRowRender:function(e){return r.a.createElement(g,{expenseDetail:i,recordId:e.id})},expandedRowKeys:a,expandRowByClick:"true",scroll:{x:1500,y:300}}))}return r.a.createElement("div",{className:"text-nowrap"},r.a.createElement(f.a,{columns:o,scroll:{x:1500,y:300}}))}}]),n}(r.a.Component),v=Object(d.c)((function(e){var t=e.expense;return{expenseData:t.expenseData,expenseDetail:t.expenseDetail}}),(function(e){return{getExpenseData:function(){return e({type:"expense/GET_DATA"})},resetExpenseData:function(){return e({type:"expense/SET_STATE",payload:{expenseData:[]}})}}}))(E);t.default=function(){return r.a.createElement("div",null,r.a.createElement(o.a,{title:"Rekap / Biaya / Produksi"}),r.a.createElement("div",{className:"kit__utils__heading"},r.a.createElement("h5",null,r.a.createElement("span",{className:"mr-3"},"Rekap Biaya Produksi"))),r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-body"},r.a.createElement(v,null))))}}}]);
//# sourceMappingURL=29.2824677b.chunk.js.map