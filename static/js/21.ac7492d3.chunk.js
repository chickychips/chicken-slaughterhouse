(this["webpackJsonpchicken-slaughterhouse"]=this["webpackJsonpchicken-slaughterhouse"]||[]).push([[21],{525:function(e,t,a){},543:function(e,t,a){"use strict";a.r(t);var n=a(321),i=a(322),r=a(323),m=a(324),o=a(0),u=a.n(o),l=a(45),s=a(14),c=a(133),p=a(374),h=a(189),d=a(548),I=a(549),y=a(547),g=a(97),f=(a(525),p.a.Option),v=function(e){Object(m.a)(a,e);var t=Object(r.a)(a);function a(){var e;Object(n.a)(this,a);for(var i=arguments.length,r=new Array(i),m=0;m<i;m++)r[m]=arguments[m];return(e=t.call.apply(t,[this].concat(r))).state={conversionItemDetails:null,inputItemSelectOption:null,outputItemSelectOption:null,quantityWeightMeasurementUnit:null,quantityVolumeMeasurementUnit:null},e.formRefInput=u.a.createRef(),e.onInputItemChange=function(t){var a,n,i=e.props.freshItemStock;e.formRefInput.current.setFieldsValue({outputItemName:void 0});var r=i.filter((function(e){return e.item_name===t})),m=i.filter((function(e){return"whole"===e.group&&"main"===e.type&&e.item_name!==t})).map((function(e){return u.a.createElement(f,{value:e.item_name,key:e.item_name},"FRESH ",e.item_name)}));n="kg | Stok : ".concat(r[0].quantity_weight),a="Ekor | Stok : ".concat(r[0].quantity_volume),e.setState({outputItemSelectOption:m,quantityWeightMeasurementUnit:n,quantityVolumeMeasurementUnit:a})},e.onFinish=function(t){var a=e.props,n=a.freshItemStock,i=a.setFreshItemStock,r=e.state.conversionItemDetails;e.setState({conversionItemDetails:[]});var m=1;null===r?r=[]:r.length>0&&(m=r[r.length-1].key+1),r.push({key:m,inputItemName:t.inputItemName,outputItemName:t.outputItemName,quantityWeight:t.quantityWeight,quantityVolume:t.quantityVolume}),i(e.updatefreshItemStockQuantity(n,t.inputItemName,t.quantityWeight,t.quantityVolume)),e.setState({conversionItemDetails:r,quantityWeightMeasurementUnit:"kg",quantityVolumeMeasurementUnit:"Ekor"}),e.formRefInput.current.setFieldsValue({inputItemName:void 0,outputItemName:void 0,quantityWeight:void 0,quantityVolume:void 0})},e.onButtonAddClick=function(){var t=e.props.conversionId,a=e.state.conversionItemDetails;if(null===a||a.length<1)h.a.error({message:"Silahkan pilih item yang ingin di konversi"});else{var n={conversionId:t,storageSource:"fresh",items:a};(0,e.props.processItemConversion)(n)}},e.updatefreshItemStockQuantity=function(e,t,a,n){return e.map((function(e){var i=Object.assign({},e);return i.item_name===t&&(i.quantity_weight-=a,i.quantity_volume-=n),i}))},e}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=this.props,t=e.generateConversionId,a=e.getFreshItemStock;t(),a()}},{key:"render",value:function(){var e=this.props,t=e.conversionId,a=e.freshItemStock,n=(new Date).toLocaleDateString("en-US"),i=this.state,r=i.conversionItemDetails,m=i.inputItemSelectOption,o=i.outputItemSelectOption,s=i.quantityWeightMeasurementUnit,h=i.quantityVolumeMeasurementUnit;(s=s||"kg",h=h||"Ekor",m=m||[],o=o||[],r=r||[],a.length>0)&&(m=a.filter((function(e){return"whole"===e.group&&"main"===e.type&&e.quantity_volume>0&&e.quantity_weight>0})).map((function(e){return u.a.createElement(f,{value:e.item_name,key:e.item_name},"FRESH ",e.item_name)})));return u.a.createElement("div",null,u.a.createElement(c.a,{title:"Process / conversion"}),u.a.createElement("div",{className:"kit__utils__heading"},u.a.createElement("h5",null,"Proses Konversi")),u.a.createElement("div",{className:"card"},u.a.createElement("div",{className:"card-body"},u.a.createElement(d.a,Object.assign({},{labelCol:{xs:{span:24},sm:{span:4}},wrapperCol:{xs:{span:24},sm:{span:12}}},{ref:this.formRefInput,labelAlign:"left",onFinish:this.onFinish}),u.a.createElement(d.a.Item,{name:"conversionId",label:"Kode konversi"},u.a.createElement(I.a,{placeholder:t,disabled:!0})),u.a.createElement(d.a.Item,{name:"dateToday",label:"Tanggal"},u.a.createElement(I.a,{placeholder:n,disabled:!0})),u.a.createElement(d.a.Item,{id:"inputItemName",name:"inputItemName",label:"Nama Item",rules:[{required:!0,message:"Item harus dipilih"}]},u.a.createElement(p.a,{onChange:this.onInputItemChange,placeholder:"Pilih item"},m)),u.a.createElement(d.a.Item,{name:"quantityWeight",label:"Quantity",rules:[{required:!0,message:"Quantity harus diisi"}]},u.a.createElement(I.a,{type:"number",placeholder:"Masukkan quantity",addonAfter:s})),u.a.createElement(d.a.Item,{name:"quantityVolume",label:"Quantity",rules:[{required:!0,message:"Quantity harus diisi"}]},u.a.createElement(I.a,{type:"number",placeholder:"Masukkan quantity",addonAfter:h})),u.a.createElement("div",{className:"kit__utils__heading"},u.a.createElement("h5",null,"Hasil Konversi")),u.a.createElement(d.a.Item,{id:"outputItemName",name:"outputItemName",label:"Nama Item",rules:[{required:!0,message:"Item harus dipilih"}]},u.a.createElement(p.a,{placeholder:"Pilih item"},o)),u.a.createElement("button",{type:"submit",className:"btn btn-success"},"Tambah Hasil Konversi"),u.a.createElement("div",null,u.a.createElement("br",null)),u.a.createElement("div",{className:"mb-4 kit__utils__scrollTable"},u.a.createElement(y.a,{columns:[{title:"Nama Item Asal",width:100,dataIndex:"inputItemName",key:"inputItemName"},{title:"Nama Item Hasil",width:100,dataIndex:"outputItemName",key:"outputItemName"},{title:"Qty (kg)",width:100,dataIndex:"quantityWeight",key:"quantityWeight"},{title:"Qty (Ekor/Pax)",width:100,dataIndex:"quantityVolume",key:"quantityVolume"}],dataSource:r}))),u.a.createElement("div",{className:"border-top text-dark font-size-18 pt-4"},u.a.createElement(l.a,{to:"/storage/fresh",className:"kit__utils__link font-size-16"},u.a.createElement("i",{className:"fe fe-arrow-left mr-1 align-middle"}),"Kembali"),u.a.createElement(g.a,{onClick:this.onButtonAddClick,className:"btn btn-lg btn-success width-200 mb-2 float-right"},"Proses")))))}}]),a}(u.a.Component);t.default=Object(s.c)((function(e){var t=e.storage;return{conversionId:t.conversionId,freshItemStock:t.freshItemStock}}),(function(e){return{generateConversionId:function(){e({type:"storage/GENERATE_CONVERSION_ID"})},getFreshItemStock:function(){e({type:"storage/GET_FRESH_ITEM_STOCK"})},processItemConversion:function(t){e({type:"storage/PROCESS_ITEM_CONVERSION",payload:t})},setFreshItemStock:function(t){e({type:"storage/SET_STATE",payload:{freshItemStock:t}})}}}))(v)}}]);
//# sourceMappingURL=21.ac7492d3.chunk.js.map