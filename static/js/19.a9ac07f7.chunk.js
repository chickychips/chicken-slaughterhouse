(this["webpackJsonpchicken-slaughterhouse"]=this["webpackJsonpchicken-slaughterhouse"]||[]).push([[19],{527:function(t,e,a){},541:function(t,e,a){"use strict";a.r(e);var n=a(321),i=a(322),l=a(323),u=a(324),o=a(0),r=a.n(o),m=a(45),s=a(14),c=a(133),d=a(376),p=a(189),h=a(548),g=a(549),y=a(547),I=a(97),f=(a(527),d.a.Option),E=function(t){Object(u.a)(a,t);var e=Object(l.a)(a);function a(){var t;Object(n.a)(this,a);for(var i=arguments.length,l=new Array(i),u=0;u<i;u++)l[u]=arguments[u];return(t=e.call.apply(e,[this].concat(l))).state={transactionIdSelectOption:null,thawingDataDetails:null,filteredThawingData:[],totalQuantityWeight:null,totalQuantityVolume:null,customer:null,formTransactionIdHideToggle:null,inputItemSelectOption:null,outputItemName:null,inputQuantityVolumeMeasurementUnit:null,isInputQuantityWeightDisabled:null,isInputQuantityVolumeDisabled:null},t.formRefInput=r.a.createRef(),t.onItemSourceChange=function(e){var a=t.props.thawingData;if(t.formRefInput.current.setFieldsValue({transactionId:void 0,inputItemName:void 0,inputQuantityWeight:void 0,inputQuantityVolume:void 0,outputQuantityWeight:void 0,outputQuantityVolume:void 0}),"transaction"===e)t.setState({inputItemSelectOption:[],formTransactionIdHideToggle:!1,outputItemName:void 0,thawingDataDetails:[],isInputQuantityVolumeDisabled:!0,isInputQuantityWeightDisabled:!0});else{var n=a.stockFrozenData.map((function(t){return r.a.createElement(f,{value:t.item_name,key:t.item_name},"FROZEN ",t.item_name)}));t.formRefInput.current.setFieldsValue({transactionId:void 0}),t.setState({inputItemSelectOption:n,formTransactionIdHideToggle:!0,outputItemName:void 0,thawingDataDetails:[],isInputQuantityVolumeDisabled:!1,isInputQuantityWeightDisabled:!1})}},t.onTransactionIdChange=function(e){var a=t.props.thawingData,n=0,i=0,l=[],u=[];t.setState({thawingDataDetails:u,totalQuantityWeight:n,totalQuantityVolume:i,filteredThawingData:l});var o=(u=a.thawingData.filter((function(t){return t.reference_id===e}))).map((function(t){return r.a.createElement(f,{value:t.item_name,key:t.item_name},"FROZEN ",t.item_name)}));u.forEach((function(t,e){t.key=e+1,t.item_name_frozen="FROZEN ".concat(t.item_name),n+=parseInt(t.quantity_weight,10),i+=parseInt(t.quantity_volume,10)})),l=u,t.formRefInput.current.setFieldsValue({customer:u[0].customer}),t.setState({inputItemSelectOption:o,totalQuantityWeight:n,totalQuantityVolume:i,filteredThawingData:l})},t.onInputItemChange=function(e){var a=t.props.thawingData,n=t.state.filteredThawingData,i="Ekor",l=[];"transaction"!==t.formRefInput.current.getFieldsValue().itemSource?"whole"===(l=a.stockFrozenData.filter((function(t){return t.item_name===e})))[0].group&&(i="main"===l[0].type?i:"Pax"):"whole"===(l=n.filter((function(t){return t.item_name===e})))[0].group&&(i="main"===l[0].type?i:"Pax"),t.formRefInput.current.setFieldsValue({inputQuantityWeight:l[0].quantity_weight,inputQuantityVolume:l[0].quantity_volume}),t.setState({inputQuantityVolumeMeasurementUnit:i,outputItemName:"FRESH ".concat(e)})},t.onFinish=function(e){var a=t.state,n=a.thawingDataDetails,i=a.totalQuantityWeight,l=a.totalQuantityVolume;t.setState({thawingDataDetails:[]});var u=1;null===n?n=[]:n.length>0&&(u=n[n.length-1].key+1),n.push({key:u,item_name:e.inputItemName,item_name_frozen:"FROZEN ".concat(e.inputItemName),input_quantity_weight:e.inputQuantityWeight,input_quantity_volume:e.inputQuantityVolume,output_quantity_weight:e.outputQuantityWeight,output_quantity_volume:e.outputQuantityVolume}),i+=parseInt(e.outputQuantityWeight,10),l+=parseInt(e.outputQuantityVolume,10),t.setState({thawingDataDetails:n,totalQuantityWeight:i,totalQuantityVolume:l}),t.formRefInput.current.setFieldsValue({inputItemName:void 0,inputQuantityWeight:void 0,inputQuantityVolume:void 0,outputItemName:void 0,outputQuantityWeight:void 0,outputQuantityVolume:void 0})},t.onButtonAddClick=function(){var e=t.props.newThawingId,a=t.formRefInput.current.getFieldsValue().transactionId,n=t.state.thawingDataDetails;if(null===n||n.length<1)p.a.error({message:"Silahkan pilih kode invoice"});else{var i={thawingId:e,referenceId:a=a||"",items:n};(0,t.props.processThawing)(i)}},t}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var t=this.props,e=t.generateThawingId,a=t.getPendingTransaction;e(),a()}},{key:"render",value:function(){var t=this.props,e=t.newThawingId,a=t.thawingData,n=(new Date).toLocaleDateString("en-US"),i=this.state,l=i.transactionIdSelectOption,u=i.customer,o=i.thawingDataDetails,s=i.totalQuantityWeight,p=i.totalQuantityVolume,E=i.formTransactionIdHideToggle,w=i.inputItemSelectOption,_=i.outputItemName,b=i.inputQuantityVolumeMeasurementUnit,v=i.isInputQuantityWeightDisabled,Q=i.isInputQuantityVolumeDisabled;return l=l||[],o=o||[],s=s||0,p=p||0,u=u||"",E=null===E||E,w=w||[],_=_||"",b=b||"Ekor",v=null===v||v,Q=null===Q||Q,Object.keys(a).length>0&&(l=a.pendingTransactionId.map((function(t){return r.a.createElement(f,{value:t,key:t},t)}))),r.a.createElement("div",null,r.a.createElement(c.a,{title:"Process / Thawing"}),r.a.createElement("div",{className:"kit__utils__heading"},r.a.createElement("h5",null,"Proses Thawing")),r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-body"},r.a.createElement(h.a,Object.assign({},{labelCol:{xs:{span:24},sm:{span:4}},wrapperCol:{xs:{span:24},sm:{span:12}}},{ref:this.formRefInput,labelAlign:"left",onFinish:this.onFinish}),r.a.createElement(h.a.Item,{name:"newThawingId",label:"Kode Thawing"},r.a.createElement(g.a,{placeholder:e,disabled:!0})),r.a.createElement(h.a.Item,{name:"dateToday",label:"Tanggal"},r.a.createElement(g.a,{placeholder:n,disabled:!0})),r.a.createElement(h.a.Item,{id:"itemSource",name:"itemSource",label:"Asal Item",rules:[{required:!0,message:"Asal Item harus dipilih"}]},r.a.createElement(d.a,{onChange:this.onItemSourceChange,placeholder:"Pilih asal item"},r.a.createElement(f,{value:"transaction",key:"transaction"},"Invoice Id"),r.a.createElement(f,{value:"frozenWarehouse",key:"frozenWarehouse"},"Gudang Frozen"))),r.a.createElement(h.a.Item,{id:"transactionId",name:"transactionId",label:"Kode Invoice",style:!0===E?{display:"none"}:{display:""}},r.a.createElement(d.a,{onChange:this.onTransactionIdChange,placeholder:"Pilih kode invoice"},l)),r.a.createElement(h.a.Item,{name:"customer",label:"Pembeli",style:!0===E?{display:"none"}:{display:""}},r.a.createElement(g.a,{placeholder:u,disabled:!0})),r.a.createElement(h.a.Item,{id:"inputItemName",name:"inputItemName",label:"Nama Item",rules:[{required:!0,message:"Item harus dipilih"}]},r.a.createElement(d.a,{onChange:this.onInputItemChange,placeholder:"Pilih item"},w)),r.a.createElement(h.a.Item,{name:"inputQuantityWeight",label:"Quantity",rules:[{required:!0,message:"Quantity harus diisi"}]},r.a.createElement(g.a,{type:"number",disabled:v,placeholder:"Masukkan quantity",addonAfter:"kg"})),r.a.createElement(h.a.Item,{name:"inputQuantityVolume",label:"Quantity",rules:[{required:!0,message:"Quantity harus diisi"}]},r.a.createElement(g.a,{type:"number",disabled:Q,placeholder:"Masukkan quantity",addonAfter:b})),r.a.createElement("div",{className:"kit__utils__heading"},r.a.createElement("h5",null,"Hasil Thawing")),r.a.createElement(h.a.Item,{name:"outputItemName",label:"Item hasil"},r.a.createElement(g.a,{placeholder:_,disabled:!0})),r.a.createElement(h.a.Item,{name:"outputQuantityWeight",label:"Quantity",rules:[{required:!0,message:"Quantity harus diisi"}]},r.a.createElement(g.a,{type:"number",placeholder:"Masukkan quantity",addonAfter:"kg"})),r.a.createElement(h.a.Item,{name:"outputQuantityVolume",label:"Quantity",rules:[{required:!0,message:"Quantity harus diisi"}]},r.a.createElement(g.a,{type:"number",placeholder:"Masukkan quantity",addonAfter:b})),r.a.createElement("button",{type:"submit",className:"btn btn-success"},"Tambah Hasil Thawing"),r.a.createElement("div",null,r.a.createElement("br",null)),r.a.createElement("div",{className:"mb-4 kit__utils__scrollTable"},r.a.createElement(y.a,{columns:[{title:"Nama Item",width:100,dataIndex:"item_name_frozen",key:"item_name_frozen"},{title:"Qty (kg)",width:100,dataIndex:"output_quantity_weight",key:"output_quantity_weight"},{title:"Qty (Ekor/Pax)",width:100,dataIndex:"output_quantity_volume",key:"output_quantity_volume"}],dataSource:o}))),r.a.createElement("div",{className:"border-top text-dark font-size-18 pt-4"},r.a.createElement("p",{className:"mb-1 text-right"},"Total Qty (kg): ",r.a.createElement("strong",{className:"font-size-24"},s)),r.a.createElement("p",{className:"mb-1 text-right"},"Total Qty (Ekor/Pax): ",r.a.createElement("strong",{className:"font-size-24"},p)),r.a.createElement(m.a,{to:"/",className:"kit__utils__link font-size-16"},r.a.createElement("i",{className:"fe fe-arrow-left mr-1 align-middle"}),"Kembali"),r.a.createElement(I.a,{onClick:this.onButtonAddClick,className:"btn btn-lg btn-success width-200 mb-2 float-right"},"Proses")))))}}]),a}(r.a.Component);e.default=Object(s.c)((function(t){var e=t.thawing;return{newThawingId:e.newThawingId,thawingData:e.thawingData}}),(function(t){return{generateThawingId:function(){t({type:"thawing/GENERATE_THAWING_ID"})},getPendingTransaction:function(){t({type:"thawing/GET_DATA"})},processThawing:function(e){t({type:"thawing/PROCESS_THAWING",payload:e})}}}))(E)}}]);
//# sourceMappingURL=19.a9ac07f7.chunk.js.map