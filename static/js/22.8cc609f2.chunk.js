(this["webpackJsonpchicken-slaughterhouse"]=this["webpackJsonpchicken-slaughterhouse"]||[]).push([[22],{526:function(e,t,a){},545:function(e,t,a){"use strict";a.r(t);var n=a(321),i=a(322),o=a(323),r=a(324),m=a(0),u=a.n(m),l=a(45),s=a(14),c=a(133),p=a(374),d=a(189),I=a(548),h=a(549),y=a(547),g=a(97),v=(a(526),p.a.Option),f=function(e){Object(r.a)(a,e);var t=Object(o.a)(a);function a(){var e;Object(n.a)(this,a);for(var i=arguments.length,o=new Array(i),r=0;r<i;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))).state={conversionItemDetails:null,inputItemSelectOption:null,outputItemSelectOption:null,quantityWeightMeasurementUnit:null,quantityVolumeMeasurementUnit:null},e.formRefInput=u.a.createRef(),e.onInputItemChange=function(t){var a,n,i=e.props.frozenItemStock;e.formRefInput.current.setFieldsValue({outputItemName:void 0});var o=i.filter((function(e){return e.item_name===t})),r=i.filter((function(e){return"whole"===e.group&&"main"===e.type&&e.item_name!==t})).map((function(e){return u.a.createElement(v,{value:e.item_name,key:e.item_name},"FROZEN ",e.item_name)}));n="kg | Stok : ".concat(o[0].quantity_weight),a="Ekor | Stok : ".concat(o[0].quantity_volume),e.setState({outputItemSelectOption:r,quantityWeightMeasurementUnit:n,quantityVolumeMeasurementUnit:a})},e.onFinish=function(t){var a=e.props,n=a.frozenItemStock,i=a.setFrozenItemStock,o=e.state.conversionItemDetails;e.setState({conversionItemDetails:[]});var r=1;null===o?o=[]:o.length>0&&(r=o[o.length-1].key+1),o.push({key:r,inputItemName:t.inputItemName,outputItemName:t.outputItemName,quantityWeight:t.quantityWeight,quantityVolume:t.quantityVolume}),i(e.updateFrozenItemStockQuantity(n,t.inputItemName,t.quantityWeight,t.quantityVolume)),e.setState({conversionItemDetails:o,quantityWeightMeasurementUnit:"kg",quantityVolumeMeasurementUnit:"Ekor"}),e.formRefInput.current.setFieldsValue({inputItemName:void 0,outputItemName:void 0,quantityWeight:void 0,quantityVolume:void 0})},e.onButtonAddClick=function(){var t=e.props.conversionId,a=e.state.conversionItemDetails;if(null===a||a.length<1)d.a.error({message:"Silahkan pilih item yang ingin di konversi"});else{var n={conversionId:t,storageSource:"frozen",items:a};(0,e.props.processItemConversion)(n)}},e.updateFrozenItemStockQuantity=function(e,t,a,n){return e.map((function(e){var i=Object.assign({},e);return i.item_name===t&&(i.quantity_weight-=a,i.quantity_volume-=n),i}))},e}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=this.props,t=e.generateConversionId,a=e.getFrozenItemStock;t(),a()}},{key:"render",value:function(){var e=this.props,t=e.conversionId,a=e.frozenItemStock,n=(new Date).toLocaleDateString("en-US"),i=this.state,o=i.conversionItemDetails,r=i.inputItemSelectOption,m=i.outputItemSelectOption,s=i.quantityWeightMeasurementUnit,d=i.quantityVolumeMeasurementUnit;(s=s||"kg",d=d||"Ekor",r=r||[],m=m||[],o=o||[],a.length>0)&&(r=a.filter((function(e){return"whole"===e.group&&"main"===e.type&&e.quantity_volume>0&&e.quantity_weight>0})).map((function(e){return u.a.createElement(v,{value:e.item_name,key:e.item_name},"FROZEN ",e.item_name)})));return u.a.createElement("div",null,u.a.createElement(c.a,{title:"Process / conversion"}),u.a.createElement("div",{className:"kit__utils__heading"},u.a.createElement("h5",null,"Proses Konversi")),u.a.createElement("div",{className:"card"},u.a.createElement("div",{className:"card-body"},u.a.createElement(I.a,Object.assign({},{labelCol:{xs:{span:24},sm:{span:4}},wrapperCol:{xs:{span:24},sm:{span:12}}},{ref:this.formRefInput,labelAlign:"left",onFinish:this.onFinish}),u.a.createElement(I.a.Item,{name:"conversionId",label:"Kode konversi"},u.a.createElement(h.a,{placeholder:t,disabled:!0})),u.a.createElement(I.a.Item,{name:"dateToday",label:"Tanggal"},u.a.createElement(h.a,{placeholder:n,disabled:!0})),u.a.createElement(I.a.Item,{id:"inputItemName",name:"inputItemName",label:"Nama Item",rules:[{required:!0,message:"Item harus dipilih"}]},u.a.createElement(p.a,{onChange:this.onInputItemChange,placeholder:"Pilih item"},r)),u.a.createElement(I.a.Item,{name:"quantityWeight",label:"Quantity",rules:[{required:!0,message:"Quantity harus diisi"}]},u.a.createElement(h.a,{type:"number",placeholder:"Masukkan quantity",addonAfter:s})),u.a.createElement(I.a.Item,{name:"quantityVolume",label:"Quantity",rules:[{required:!0,message:"Quantity harus diisi"}]},u.a.createElement(h.a,{type:"number",placeholder:"Masukkan quantity",addonAfter:d})),u.a.createElement("div",{className:"kit__utils__heading"},u.a.createElement("h5",null,"Hasil Konversi")),u.a.createElement(I.a.Item,{id:"outputItemName",name:"outputItemName",label:"Nama Item",rules:[{required:!0,message:"Item harus dipilih"}]},u.a.createElement(p.a,{placeholder:"Pilih item"},m)),u.a.createElement("button",{type:"submit",className:"btn btn-success"},"Tambah Hasil Konversi"),u.a.createElement("div",null,u.a.createElement("br",null)),u.a.createElement("div",{className:"mb-4 kit__utils__scrollTable"},u.a.createElement(y.a,{columns:[{title:"Nama Item Asal",width:100,dataIndex:"inputItemName",key:"inputItemName"},{title:"Nama Item Hasil",width:100,dataIndex:"outputItemName",key:"outputItemName"},{title:"Qty (kg)",width:100,dataIndex:"quantityWeight",key:"quantityWeight"},{title:"Qty (Ekor/Pax)",width:100,dataIndex:"quantityVolume",key:"quantityVolume"}],dataSource:o}))),u.a.createElement("div",{className:"border-top text-dark font-size-18 pt-4"},u.a.createElement(l.a,{to:"/storage/frozen",className:"kit__utils__link font-size-16"},u.a.createElement("i",{className:"fe fe-arrow-left mr-1 align-middle"}),"Kembali"),u.a.createElement(g.a,{onClick:this.onButtonAddClick,className:"btn btn-lg btn-success width-200 mb-2 float-right"},"Proses")))))}}]),a}(u.a.Component);t.default=Object(s.c)((function(e){var t=e.storage;return{conversionId:t.conversionId,frozenItemStock:t.frozenItemStock}}),(function(e){return{generateConversionId:function(){e({type:"storage/GENERATE_CONVERSION_ID"})},getFrozenItemStock:function(){e({type:"storage/GET_FROZEN_ITEM_STOCK"})},processItemConversion:function(t){e({type:"storage/PROCESS_ITEM_CONVERSION",payload:t})},setFrozenItemStock:function(t){e({type:"storage/SET_STATE",payload:{frozenItemStock:t}})}}}))(f)}}]);
//# sourceMappingURL=22.8cc609f2.chunk.js.map