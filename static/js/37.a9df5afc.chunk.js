(this["webpackJsonpchicken-slaughterhouse"]=this["webpackJsonpchicken-slaughterhouse"]||[]).push([[37],{552:function(t,e,a){"use strict";a.r(e);var n=a(0),r=a.n(n),o=a(45),i=a(133),c=a(97),l=a(17),s=a(321),u=a(322),d=a(323),h=a(324),m=a(14),y=a(566),g=a(325),p=a.n(g),f=a(549),_=a(547),E=function(t){Object(h.a)(a,t);var e=Object(d.a)(a);function a(){return Object(s.a)(this,a),e.apply(this,arguments)}return Object(u.a)(a,[{key:"render",value:function(){var t=[{title:"Item",width:10,dataIndex:"item_name_actual",key:"item_name_actual"},{title:"Qty (kg)",width:10,dataIndex:"quantity_weight",key:"quantity_weight"},{title:"Qty (Ekor/Pax)",width:10,dataIndex:"quantity_volume",key:"quantity_volume"},{title:"Harga /kg",width:10,dataIndex:"unit_price",key:"unit_price"},{title:"Discount",width:10,dataIndex:"discount",key:"discount"},{title:"Total",width:10,dataIndex:"total_price",key:"total_price"}],e=this.props.transactionDetail;return e.length>0?(e.forEach((function(t,e){t.key=e+1,t.item_name_actual="".concat(!0===t.is_frozen?"FROZEN":"FRESH"," ").concat(t.item_name)})),r.a.createElement("div",null,r.a.createElement(_.a,{columns:t,dataSource:e}))):r.a.createElement("div",null,r.a.createElement(_.a,{columns:t}))}}]),a}(r.a.Component),b=function(t){Object(h.a)(a,t);var e=Object(d.a)(a);function a(){var t;Object(s.a)(this,a);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(t=e.call.apply(e,[this].concat(o))).state={searchText:"",sortedInfo:null,expandedRow:null,latestRecordId:null},t.handleChange=function(e,a,n){console.log(n),t.setState({sortedInfo:n})},t.getColumnSearchProps=function(e){return{filterDropdown:function(e){var a=e.setSelectedKeys,n=e.selectedKeys,o=e.confirm,i=e.clearFilters;return r.a.createElement("div",{style:{padding:8}},r.a.createElement(f.a,{ref:function(e){t.searchInput=e},placeholder:"Cari",value:n[0],onChange:function(t){return a(t.target.value?[t.target.value]:[])},onPressEnter:function(){return t.handleSearch(n,o)},style:{width:188,marginBottom:8,display:"block"}}),r.a.createElement(c.a,{type:"primary",onClick:function(){return t.handleSearch(n,o)},icon:r.a.createElement(y.a,null),size:"small",style:{width:90,marginRight:8}},"Search"),r.a.createElement(c.a,{onClick:function(){return t.handleReset(i)},size:"small",style:{width:90}},"Reset"))},filterIcon:function(t){return r.a.createElement(y.a,{style:{color:t?"#1890ff":void 0}})},onFilter:function(t,a){return a[e]=null===a[e]?"":a[e],a[e].toString().toLowerCase().includes(t.toLowerCase())},onFilterDropdownVisibleChange:function(e){e&&setTimeout((function(){return t.searchInput.select()}))},render:function(a){var n=t.state.searchText;return a=null===a?"":a,"id"===e||"customer"===e?r.a.createElement("a",{className:"btn btn-sm btn-light",href:"#",onClick:function(t){return t.preventDefault()}},r.a.createElement(p.a,{highlightStyle:{backgroundColor:"#ffc069",padding:0},searchWords:[n],autoEscape:!0,textToHighlight:a.toString()})):"status_name"===e?r.a.createElement("span",{className:"PENDING"===a?"font-size-12 badge badge-primary":"font-size-12 badge badge-default"},r.a.createElement(p.a,{highlightStyle:{backgroundColor:"#ffc069",padding:0},searchWords:[n],autoEscape:!0,textToHighlight:a.toString()})):r.a.createElement(p.a,{highlightStyle:{backgroundColor:"#ffc069",padding:0},searchWords:[n],autoEscape:!0,textToHighlight:a.toString()})}}},t.handleSearch=function(e,a){a(),t.setState({searchText:e[0]})},t.handleReset=function(e){e(),t.setState({searchText:""})},t}return Object(u.a)(a,[{key:"componentDidMount",value:function(){var t=this.props,e=t.getTransactionHistory;(0,t.resetTransactionHistory)(),e()}},{key:"render",value:function(){var t=this,e=this.state,a=e.sortedInfo,n=e.expandedRow,o=e.latestRecordId;a=a||{},n=n||[],o=o||"";var i=[Object(l.a)({title:"ID",dataIndex:"id",key:"id"},this.getColumnSearchProps("id"),{sorter:function(t,e){return t.id.replace(/-/g,"")-e.id.replace(/-/g,"")},sortOrder:"id"===a.columnKey&&a.order}),Object(l.a)({title:"Tanggal",width:250,dataIndex:"created_on",key:"created_on"},this.getColumnSearchProps("created_on"),{sorter:function(t,e){return t.created_on.replace(/-|:| |\./g,"")-e.created_on.replace(/-|:| |\./g,"")},sortOrder:"created_on"===a.columnKey&&a.order}),Object(l.a)({title:"Customer",dataIndex:"customer",key:"customer"},this.getColumnSearchProps("customer"),{sorter:function(t,e){return t.customer.length-e.customer.length},sortOrder:"customer"===a.columnKey&&a.order}),Object(l.a)({title:"Discount",dataIndex:"discount",key:"discount"},this.getColumnSearchProps("discount"),{sorter:function(t,e){return t.discount-e.discount},sortOrder:"discount"===a.columnKey&&a.order}),Object(l.a)({title:"Total",dataIndex:"total_price",key:"total_price"},this.getColumnSearchProps("total_price"),{sorter:function(t,e){return t.total_price-e.total_price},sortOrder:"total_price"===a.columnKey&&a.order}),Object(l.a)({title:"Qty (kg)",width:150,dataIndex:"total_quantity_weight",key:"total_quantity_weight"},this.getColumnSearchProps("quantity_weight"),{sorter:function(t,e){return t.total_quantity_weight-e.total_quantity_weight},sortOrder:"total_quantity_weight"===a.columnKey&&a.order}),Object(l.a)({title:"Qty (Ekor/Pax)",width:150,dataIndex:"total_quantity_volume",key:"total_quantity_volume"},this.getColumnSearchProps("quantity_volume"),{sorter:function(t,e){return t.total_quantity_volume-e.total_quantity_volume},sortOrder:"total_quantity_volume"===a.columnKey&&a.order}),Object(l.a)({title:"Sales",dataIndex:"created_by",key:"created_by"},this.getColumnSearchProps("created_by"),{sorter:function(t,e){return t.created_by.length-e.created_by.length},sortOrder:"created_by"===a.columnKey&&a.order}),Object(l.a)({title:"Status",dataIndex:"status_name",key:"status_name",fixed:"right"},this.getColumnSearchProps("status_name"),{sorter:function(t,e){return t.status_name.length-e.status_name.length},sortOrder:"status_name"===a.columnKey&&a.order}),{title:"Action",key:"action",fixed:"right",render:function(){return r.a.createElement("span",null,r.a.createElement("a",{href:"#",onClick:function(t){return t.preventDefault()},className:"btn btn-sm btn-light"},r.a.createElement("small",null,r.a.createElement("i",{className:"fe fe-trash mr-2"})),"Cancel"))}}],c=this.props,s=c.transactionHistory,u=c.transactionDetail,d=c.getTransactionDetail;return s.length>0?(s.forEach((function(t,e){t.key=e+1})),r.a.createElement("div",{className:"text-nowrap"},r.a.createElement(_.a,{columns:i,dataSource:s,onChange:this.handleChange,onExpand:function(e,a){o!==a.id&&d(a.id),t.setState({latestRecordId:a.id,expandedRow:e?[a.key]:void 0})},expandedRowRender:function(){return r.a.createElement(E,{transactionDetail:u})},expandedRowKeys:n,expandRowByClick:"true",scroll:{x:1500,y:300}}))):r.a.createElement("div",{className:"text-nowrap"},r.a.createElement(_.a,{columns:i,scroll:{x:1500,y:300}}))}}]),a}(r.a.Component),k=Object(m.c)((function(t){var e=t.transaction;return{transactionHistory:e.transactionHistory,transactionDetail:e.transactionDetail}}),(function(t){return{getTransactionHistory:function(){return t({type:"transaction/GET_TRANSACTION_HISTORY"})},resetTransactionHistory:function(){return t({type:"transaction/SET_STATE",payload:{transactionHistory:[]}})},getTransactionDetail:function(e){return t({type:"transaction/GET_TRANSACTION_DETAIL",payload:{id:e}})}}}))(b);e.default=function(){return r.a.createElement("div",null,r.a.createElement(i.a,{title:"History / Penjualan"}),r.a.createElement("div",{className:"kit__utils__heading"},r.a.createElement("h5",null,r.a.createElement("span",{className:"mr-3"},"Daftar Penjualan"))),r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"px-4"},r.a.createElement("br",null),r.a.createElement(o.a,{to:"/transaction/input"},r.a.createElement(c.a,{type:"primary",size:"large",style:{width:100,marginRight:8}},"Buat Order"))),r.a.createElement("div",{className:"card-body"},r.a.createElement(k,null))))}}}]);
//# sourceMappingURL=37.a9df5afc.chunk.js.map